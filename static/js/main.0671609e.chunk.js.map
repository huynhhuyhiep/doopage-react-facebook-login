{"version":3,"sources":["../../src/index.tsx","App.tsx","index.tsx"],"names":["FacebookLogin","props","children","isMobile","scope","appId","returnScopes","responseType","redirectUri","disableMobileRedirect","authType","state","onFailure","callbackFunc","callback","language","fields","version","xfbml","cookie","useState","isSdkLoaded","setSdkLoaded","console","process","useEffect","document","window","element","d","fjs","js","checkLoginState","authResponse","status","locale","onClick","params","client_id","redirect_uri","return_scopes","response_type","auth_type","obj","str","encodeURIComponent","getParamsFromObject","response","disabled","App","log","color","ReactDOM","render","getElementById"],"mappings":"ucAIA,IA+BMA,EAA2B,SAACC,G,IAE9BC,EAiBED,EAjBFC,SACAC,EAgBEF,EAhBFE,SACAC,EAeEH,EAfFG,MACAC,EAcEJ,EAdFI,MACAC,EAaEL,EAbFK,aACAC,EAYEN,EAZFM,aACAC,EAWEP,EAXFO,YACAC,EAUER,EAVFQ,sBACAC,EASET,EATFS,SACAC,EAQEV,EARFU,MACAC,EAOEX,EAPFW,UACUC,EAMRZ,EANFa,SACAC,EAKEd,EALFc,SACAC,EAIEf,EAJFe,OACAC,EAGEhB,EAHFgB,QACAC,EAEEjB,EAFFiB,MACAC,EACElB,EADFkB,O,EAEkCC,oBAAS,GAAtCC,OAAaC,OACpBC,8BAA+BC,kBAE/BC,qBAAU,WACR,EAOIC,wBAAJ,kBACEJ,OAGAK,mBAAqB,WAEnBA,eAAe,CACbV,QAAS,IADI,EAEbZ,MAFa,EAGba,MAHa,EAIbC,WAGFG,OAED,SAAC,OACA,IAAMM,EAAUC,0BAAhB,GACMC,EAAN,EACIC,EAAJ,EACIF,iBAAJ,MAGAE,EAAKF,gBAALE,IACAA,KAEAA,kDAEAD,gCAZD,sCArBDP,wJAoCD,CAtCHE,IAyCA,IAAMO,EAAkB,SAAC,G,IAAEC,iBAAcC,WACvC,EAEEP,oBAEE,CACEQ,OADF,EAEEnB,OAAQA,IAEV,mBAAaH,EAAa,EAAD,KAAzB,OAGF,EAAeD,EAAU,CAAEsB,WACtBrB,EAAa,CAAEqB,YA0CxB,OAAOhC,EAAS,CACdkC,QAvCkB,WAClB,IAAMC,EAAS,CACbC,UADa,EAEbC,aAFa,EAGb5B,MAHa,EAIb6B,cAJa,EAKbpC,MALa,EAMbqC,cANa,EAObC,UAAWhC,GAGTP,IAAJ,EACEwB,6DA5HsB,SAACgB,GAC3B,IAAMC,EAAN,GACA,IAAK,IAAL,OACMD,kBAAJ,IAAyBA,MACvBC,OAASC,0BAAgCA,mBAAmBF,EAA5DC,KACJ,OAAKA,EAAL,OACO,IAAMA,OAAb,KADwB,GAuH2CE,CAA/DnB,GAKKA,OAAL,GAKEA,0BAAyB,YACvB,cAAIoB,SAAiCf,EAArC,GAGEL,kBAAiC,CAC/BvB,MAD+B,EAE/BoC,cAF+B,EAG/BE,UAAWhC,OAXjB,EAAeE,EAAU,CAAEsB,OAAQ,sBAC9BrB,EAAa,CAAEqB,OAAQ,uBAqBhCc,UAAW3B,KAIfrB,eAA6B,CAC3BK,MAAOmB,iBACPhB,YAA+B,qBAAXmB,OAAyBA,gBAAhC,KAFc,IAG3BvB,MAH2B,uBAI3BE,cAJ2B,EAK3BY,OAL2B,EAM3BC,QAN2B,EAO3BT,SAP2B,GAQ3BM,OAR2B,OAS3BC,QAT2B,MAU3BR,uBAV2B,EAW3BN,SAX2B,WAY3BQ,MAZ2B,iBAa3BI,SAb2B,QAc3BR,aAAc,Q,gBCpJD0C,EAtBH,WAMV,OACE,cAAC,EAAD,CACEnC,SAPqB,SAACiC,GACxBxB,QAAQ2B,IAAI,mBAAoBH,IAO9B/B,OAAO,qBACPZ,MAAM,qDAHR,SAKG,YAAiC,IAA9BgC,EAA6B,EAA7BA,QAASY,EAAoB,EAApBA,SACX,OACE,cAAC,SAAD,CAAQG,MAAM,OAAOf,QAASA,EAASY,SAAUA,EAAjD,mDCZVI,IAASC,OAAO,cAAC,EAAD,IAAS3B,SAAS4B,eAAe,W","file":"static/js/main.0671609e.chunk.js","sourcesContent":["// eslint-disable-next-line no-unused-vars\nimport { FC, useEffect, useState } from 'react'\nimport { isMobile } from 'react-device-detect'\n\nconst getParamsFromObject = (obj: any) => {\n  const str = []\n  for (const key in obj)\n    if (obj[key] !== null && obj[key] !== undefined)\n      str.push(encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]))\n  if (!str.length) return ''\n  return '?' + str.join('&')\n}\n\ninterface Props {\n  appId?: string\n\n  isDisabled?: boolean\n  callback: (res: any) => void\n\n  xfbml?: boolean\n  cookie?: boolean\n  authType?: string\n  scope?: string\n  responseType?: string\n  returnScopes?: boolean\n  redirectUri?: string\n  disableMobileRedirect?: boolean\n  isMobile?: boolean\n  fields?: string\n  version?: string\n  language?: string\n  onFailure?: (res: any) => void\n  state?: string\n}\n\nconst FacebookLogin: FC<Props> = (props) => {\n  const {\n    children,\n    isMobile,\n    scope,\n    appId,\n    returnScopes,\n    responseType,\n    redirectUri,\n    disableMobileRedirect,\n    authType,\n    state,\n    onFailure,\n    callback: callbackFunc,\n    language,\n    fields,\n    version,\n    xfbml,\n    cookie\n  } = props\n  const [isSdkLoaded, setSdkLoaded] = useState(false)\n  console.log('FACEBOOK_APP_ID', process.env.REACT_APP_FACEBOOK_APP_ID)\n\n  useEffect(() => {\n    if (!appId) {\n      console.error(\n        'FacebookLogin need appId to init Facebook Sdk, see https://www.npmjs.com/package/@doopage/react-facebook-login Props for more detail'\n      )\n      return\n    }\n\n    if (document.getElementById('facebook-jssdk')) {\n      setSdkLoaded(true)\n    } else {\n      // @ts-ignore\n      window.fbAsyncInit = () => {\n        // @ts-ignore\n        window.FB.init({\n          version: `v${version}`,\n          appId,\n          xfbml,\n          cookie\n        })\n\n        setSdkLoaded(true)\n      }\n      ;((d, s, id) => {\n        const element = d.getElementsByTagName(s)[0]\n        const fjs = element\n        let js = element\n        if (d.getElementById(id)) {\n          return\n        }\n        js = d.createElement(s)\n        js.id = id\n        // @ts-ignore\n        js.src = `https://connect.facebook.net/${language}/sdk.js`\n        // @ts-ignore\n        fjs.parentNode.insertBefore(js, fjs)\n      })(document, 'script', 'facebook-jssdk')\n    }\n  }, [appId])\n\n  // @ts-ignore\n  const checkLoginState = ({ authResponse, status }) => {\n    if (authResponse) {\n      // @ts-ignore\n      window.FB.api(\n        '/me',\n        {\n          locale: language,\n          fields: fields\n        },\n        (me: any) => callbackFunc({ ...me, ...authResponse })\n      )\n    } else {\n      if (onFailure) onFailure({ status })\n      else callbackFunc({ status })\n    }\n  }\n\n  const handleLogin = () => {\n    const params = {\n      client_id: appId,\n      redirect_uri: redirectUri,\n      state,\n      return_scopes: returnScopes,\n      scope,\n      response_type: responseType,\n      auth_type: authType\n    }\n\n    if (isMobile && !disableMobileRedirect) {\n      window.location.href = `https://www.facebook.com/dialog/oauth${getParamsFromObject(\n        params\n      )}`\n    } else {\n      // @ts-ignore\n      if (!window.FB) {\n        if (onFailure) onFailure({ status: 'facebookNotLoaded' })\n        else callbackFunc({ status: 'facebookNotLoaded' })\n      } else {\n        // @ts-ignore\n        window.FB.getLoginStatus((response) => {\n          if (response.status === 'connected') checkLoginState(response)\n          else {\n            // @ts-ignore\n            window.FB.login(checkLoginState, {\n              scope,\n              return_scopes: returnScopes,\n              auth_type: authType\n            })\n          }\n        })\n      }\n    }\n  }\n\n  // @ts-ignore\n  return children({\n    onClick: handleLogin,\n    disabled: !isSdkLoaded\n  })\n}\n\nFacebookLogin.defaultProps = {\n  appId: process.env.REACT_APP_FACEBOOK_APP_ID,\n  redirectUri: typeof window !== 'undefined' ? window.location.href : '/',\n  scope: 'public_profile,email',\n  returnScopes: true,\n  xfbml: false,\n  cookie: false,\n  authType: '',\n  fields: 'name',\n  version: '9.0',\n  disableMobileRedirect: true,\n  isMobile: isMobile,\n  state: 'facebookdirect',\n  language: 'en_US',\n  responseType: 'code'\n}\n\nexport default FacebookLogin\n","import React from 'react'\nimport FacebookLogin from '@doopage/react-facebook-login'\nimport { Button } from '@doopage/react-ui-kit'\n\nconst App = () => {\n  const responseFacebook = (response: any) => {\n    console.log('responseFacebook', response)\n    // do something\n  }\n\n  return (\n    <FacebookLogin\n      callback={responseFacebook}\n      fields='name,email,picture'\n      scope='public_profile,email,pages_messaging_subscriptions'\n    >\n      {({ onClick, disabled }: any) => {\n        return (\n          <Button color='info' onClick={onClick} disabled={disabled}>\n            Đăng nhập Facebook\n          </Button>\n        )\n      }}\n    </FacebookLogin>\n  )\n}\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}